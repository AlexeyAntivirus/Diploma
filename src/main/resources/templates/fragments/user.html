<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8"/>
        <title>Title</title>
    </head>
    <body>
        <th:block th:fragment="user-form-fragment">
            <div>
                <label>
                    Email <input type="email" th:id="email" th:name="email" th:value="${user.getEmail()}"/>
                    <label th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></label>
                </label>
            </div>
            <div>
                <label>
                    Пароль <input type="password" th:id="password" th:name="password" th:value="${user.getPassword()}"/>
                    <label th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></label>
                </label>
            </div>
            <div>
                <label>
                    Прізвище <input type="text" th:id="lastName" th:name="lastName" th:value="${user.getLastName()}"/>
                    <label th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></label>
                </label>
            </div>
            <div>
                <label>
                    Ім'я <input type="text" th:id="firstName" th:name="firstName" th:value="${user.getFirstName()}"/>
                    <label th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></label>
                </label>
            </div>
            <div>
                <label>
                    По батькові <input type="text" th:id="middleName" th:name="middleName"
                                       th:value="${user.getMiddleName()}"/>
                    <label th:if="${#fields.hasErrors('middleName')}" th:errors="*{middleName}"></label>
                </label>
            </div>
        </th:block>

        <th:block>
            <th:block th:fragment="role-showing-fragment">
                <div>
                    <label>
                        Роль <select disabled="disabled">
                            <option th:text="#{${user.getUserRole()}}" selected="selected"></option>
                        </select>
                    </label>
                </div>
            </th:block>

            <th:block th:fragment="role-choosing-fragment">
                <div>
                    <label>
                        Роль <select th:field="*{userRole}">
                            <option th:text="''" th:value="null" selected="selected"></option>
                            <option th:each="userRoleValue: ${T(com.rx.dao.UserRole).values()}"
                                th:text="#{${userRoleValue}}"
                                th:value="${userRoleValue}"
                                th:if="${userRoleValue != T(com.rx.dao.UserRole).ADMINISTRATOR}"></option>
                        </select>
                        <label th:if="${#fields.hasErrors('userRole')}" th:errors="*{userRole}"></label>
                    </label>
                </div>
            </th:block>

            <th:block th:with="userRoles = ${T(com.rx.dao.UserRole).values()}"
                      th:fragment="role-editing-fragment">
                <div>
                    <label>
                        Роль <select th:id="userRole" th:name="userRole">
                            <option th:each="userRoleValue: ${T(com.rx.dao.UserRole).values()}"
                                th:text="#{${userRoleValue}}"
                                th:value="${userRoleValue}"
                                th:if="${userRoleValue != T(com.rx.dao.UserRole).ADMINISTRATOR}"></option>
                        </select>
                    </label>
                </div>
            </th:block>
        </th:block>

        <th:block th:fragment="teaching-loads-fragment">
            <p>Педагогічна нагрузка</p>
            <div th:each="teachingLoad: ${user.getTeachingLoads()}">
                <a th:text="${teachingLoad.getDocumentFilename()}"></a>
            </div>
        </th:block>

        <th:block th:fragment="disciplines-fragment">
            <p>Дисципліни</p>
            <div th:each="discipline: ${user.getDisciplines()}">
                <a th:text="${discipline.getName()}" th:href="@{'/discipline/get/' + ${discipline.getId()}}"></a>
            </div>
        </th:block>
    </body>
</html>